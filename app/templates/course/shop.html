{% extends 'base.html' %}

{% block title %}Explorar Cursos{% endblock %}

{% block content %}
<div class="shop-container">
  <h2>Categorías</h2>
  <ul class="category-list">
    <li><a href="{{ url_for('user.shop') }}">Todas</a></li>
    {% for cat in categories %}
      <li>
        <a href="{{ url_for('user.shop', category=cat.id) }}"
           {% if selected_category == cat.id %}style="font-weight:bold;"{% endif %}>
           {{ cat.name }}
        </a>
      </li>
    {% endfor %}
  </ul>

  <h3>Cursos disponibles</h3>
  <div class="slider-wrapper">
    <button class="slider-btn prev-btn" aria-label="Anterior">&#10094;</button>
    <div class="course-card-container">
      {% for course in courses %}
        <div class="course-card">
          <h4>{{ course.title }}</h4>
          <p>{{ course.description[:100] }}...</p>
          <p><strong>Duración:</strong> {{ course.duration }}</p>
          <a href="{{ url_for('user.buy_course', course_id=course.id) }}" class="btn-comprar">Ver más</a>
        </div>
      {% else %}
        <p>No hay cursos disponibles en esta categoría.</p>
      {% endfor %}
    </div>
    <button class="slider-btn next-btn" aria-label="Siguiente">&#10095;</button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const container = document.querySelector('.course-card-container');
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    const scrollAmount = 320; // ancho de cada card + gap

    prevBtn.addEventListener('click', () => {
      container.scrollBy({ left: -scrollAmount, behavior: 'smooth' });
    });

    nextBtn.addEventListener('click', () => {
      container.scrollBy({ left: scrollAmount, behavior: 'smooth' });
    });
  });
</script>


{% endblock %}
